#Generated by Kickstart Configurator
#platform=x86

#System language
lang en_GB
#Language modules to install
langsupport en_US --default=en_GB

#System keyboard <--- KS BUG, THIS IS IGNORED
keyboard dk

#System mouse
mouse

#System timezone
timezone Africa/Blantyre

#Root password
#rootpw --disabled
#Initial user
#PJD: TODO put password someplace easily accessable
# Encrypted password created with $openssl passwd -1 "password"

user student --fullname "Student" --iscrypted --password $1$KsFQb2wB$0MuY2HqUF54gRICuR0QsC1

#Reboot after installation
reboot

#Use text mode install
text

#Install OS instead of upgrade
install

#Use Web installation
url --url http://repository.fair/ubuntu/

#System bootloader configuration
bootloader --location=mbr 

#Clear the Master Boot Record
zerombr yes

#Partition clearing information
clearpart --all --initlabel 

#Basic disk partition
part / --fstype ext4 --size 1 --grow --asprimary 
part swap --size 2048

#System authorization infomation
#auth  --useshadow  --enablemd5 
#Firewall configuration
#firewall --disabled 
#Do not configure the X Window System
#skipx


#Package install information
%packages
@ ubuntu-desktop
@ edubuntu-desktop-gnome
@ openssh-server

%post
mkdir /root/postinstall
wget http://fair/postinstall.tar.gz -O /root/postinstall/postinstall.tar.gz
cd /root/postinstall
tar xvfz postinstall.tar.gz 
echo "#!/bin/sh" > /etc/rc.local
echo "/root/postinstall/postinstall.sh" >> /etc/rc.local
echo "options i915 modeset=1" > /etc/modprobe.d/i915.conf
